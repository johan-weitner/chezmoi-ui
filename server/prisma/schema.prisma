// Prisma schema for the database
// Documentation: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-arm64-openssl-3.0.x"]
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Application {
  id        Int              @id @default(autoincrement())
  key       String           @unique
  name      String
  edited    String?
  desc      String?
  tags      String?          @default("")
  bin       String?
  short     String?
  home      String
  docs      String?
  github    String?
  whalebrew String?
  apt       String?
  brew      String?
  cask      String?
  cargo     String?
  npm       String?
  pip       String?
  pipx      String?
  gem       String?
  script    String?
  choco     String?
  scoop     String?
  winget    String?
  pkgdarwin String?
  ansible   String?
  binary    String?
  yay       String?
  appstore  String?
  pacman    String?
  port      String?
  appTags   ApplicationTag[]
}

model Tag {
  id   Int              @id @default(autoincrement())
  name String           @unique
  apps ApplicationTag[]
}

model ApplicationTag {
  application   Application @relation(fields: [applicationId], references: [id])
  applicationId Int
  tag           Tag         @relation(fields: [tagId], references: [id])
  tagId         Int

  @@id([applicationId, tagId])
}
